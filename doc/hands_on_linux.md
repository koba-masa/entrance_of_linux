# Linuxに触れる
## ホームディレクトリ
### 概要
- ログイン直後のユーザのカレンとディレクトリ
   - 一般的に`/home/<ユーザ名>`

### 関連コマンド
#### 自身のホームディレクトリを確認する
```
$ echo $HOME
```

#### ホームディレクトリに移動する
```
$ cd ~
$ cd $HOME
```

#### ホームディレクトリを指定・変更する
```
# useradd -d <指定するディレクトリパス> <追加するユーザ名>
# usermod -d <指定するディレクトリパス> <変更するユーザ名>
```

#### 各ユーザのホームディレクトリを確認する
```
$ cat /etc/passwd
```

## ユーザを切り替える
### コマンド
- 一般ユーザを切り替える場合
```
$ su - <ユーザー名>
```

- rootユーザを切り替える場合
```
$ su -
```

## SELinux
### 概要
- Security-Enhanced Linuxの略
- 使いこなせれば、強固なセキュリティを効地区できる
- が、日本ではあまり使用されていない

### コマンド
#### 現在の設定を確認する
```
# getenforce
```

#### 現在の設定を一時的に変更する
- 無効化する
```
# setenforce 0
```

- 有効化する
```
# setenforce 1
```

#### 永続的に反映する
```
# vi /etc/selinux
```

## Runlevel
### 概要
- Runlevelはディストリビューションによって異なる
- 以下にRedHat系のランレベルを示す

|レベル|概要|備考|
|:--|:--|:--|
|0|停止||
|1|シングルユーザモード|rootユーザのみログイン可能|
|2|未使用||
|3|マルチユーザモード|CLI|
|4|未使用||
|5|マルチユーザモード+Xディスプレイマネージャモード|GUI|
|6|リブート||

### 起動モードの変更
#### 現在のモードの確認
```
# runlevel
```

#### 一時的にランレベルを変更する
```
# init <ランレベル>
```

#### 永続的に変更する
```
# vi /etc/inittab
```

##### 注意事項
- 永続的な設定に`0`や`6`を指定するとどうなるか？

## sshデーモン
### 概要
- SSHサーバ
- これが起動していないとsshによるログインはできない

### 設定ファイル
- `/etc/ssh/sshd_config`

#### rootユーザでのログインを禁止する
```
# vi /etc/ssh/sshd_config
```
- 以下の項目を`no`に変更する
   - `PermitRootLogin  yes`
- デーモンを再起動する
```
# systemctl restart sshd.service
```

## ファイアーウォールの設定を変更する
### 設定ファイルの配置場所
- `/usr/lib/firewalld/services/`

### ファイアーウォールの設定を確認する
```
# firewall-cmd --list-all
```

### 既存のサービス設定を削除する
```
# firewall-cmd --permanent --remove-service=<サービス名>
```

### サービス設定を追加する
```
# firewall-cmd --permanent --add-service=<サービス名>
```

### ファイアーウォールの設定を反映する
```
# firewall-cmd --reload
```

## 一般ユーザに管理権限を必要とするコマンドを実行する
### 設定ファイル
- `/etc/sudoers`
- `/etc/sudoers.d`

#### 一般ユーザに権限を付与する
```
# visudo
```
- 以下の設定を追加する
   - `<ユーザ名>　<ホスト>=<誰として> <許可するコマンド>`
      - 例)`testuser ALL=(ALL) ALL, !userdel, !/sbin/userdel`
